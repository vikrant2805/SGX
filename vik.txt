LyoKICogQ29weXJpZ2h0IDIwMTUgSUJNIENvcnAuCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBB
cGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5v
dCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAq
IFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3
LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5
IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0
cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJB
U0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0
aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lm
aWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRl
ciB0aGUgTGljZW5zZS4KICovCihmdW5jdGlvbiAoKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvKioK
ICAgKiBAbmdkb2MgY29udHJvbGxlcgogICAqIEBuYW1lIExhdW5jaEluc3RhbmNlU291cmNlQ29u
dHJvbGxlcgogICAqIEBkZXNjcmlwdGlvbgogICAqIFRoZSBgTGF1bmNoSW5zdGFuY2VTb3VyY2VD
b250cm9sbGVyYCBjb250cm9sbGVyIHByb3ZpZGVzIGZ1bmN0aW9ucyBmb3IKICAgKiBjb25maWd1
cmluZyB0aGUgc291cmNlIHN0ZXAgb2YgdGhlIExhdW5jaCBJbnN0YW5jZSBXaXphcmQuCiAgICoK
ICAgKi8KICB2YXIgcHVzaCA9IFtdLnB1c2g7CgogIGFuZ3VsYXIKICAgIC5tb2R1bGUoJ2hvcml6
b24uZGFzaGJvYXJkLnByb2plY3Qud29ya2Zsb3cubGF1bmNoLWluc3RhbmNlJykKICAgIC5jb250
cm9sbGVyKCdMYXVuY2hJbnN0YW5jZVNvdXJjZUNvbnRyb2xsZXInLCBMYXVuY2hJbnN0YW5jZVNv
dXJjZUNvbnRyb2xsZXIpOwoKICBMYXVuY2hJbnN0YW5jZVNvdXJjZUNvbnRyb2xsZXIuJGluamVj
dCA9IFsKICAgICckc2NvcGUnLAogICAgJ2hvcml6b24uZGFzaGJvYXJkLnByb2plY3Qud29ya2Zs
b3cubGF1bmNoLWluc3RhbmNlLmJvb3Qtc291cmNlLXR5cGVzJywKICAgICdieXRlc0ZpbHRlcics
CiAgICAnZGF0ZUZpbHRlcicsCiAgICAnZGVjb2RlRmlsdGVyJywKICAgICdkaXNrRm9ybWF0Rmls
dGVyJywKICAgICdnYkZpbHRlcicsCiAgICAnaG9yaXpvbi5kYXNoYm9hcmQucHJvamVjdC53b3Jr
Zmxvdy5sYXVuY2gtaW5zdGFuY2UuYmFzZVBhdGgnLAogICAgJ2hvcml6b24uZnJhbWV3b3JrLndp
ZGdldHMudHJhbnNmZXItdGFibGUuZXZlbnRzJwogIF07CgogIGZ1bmN0aW9uIExhdW5jaEluc3Rh
bmNlU291cmNlQ29udHJvbGxlcigkc2NvcGUsCiAgICBib290U291cmNlVHlwZXMsCiAgICBieXRl
c0ZpbHRlciwKICAgIGRhdGVGaWx0ZXIsCiAgICBkZWNvZGVGaWx0ZXIsCiAgICBkaXNrRm9ybWF0
RmlsdGVyLAogICAgZ2JGaWx0ZXIsCiAgICBiYXNlUGF0aCwKICAgIGV2ZW50cwogICkgewoKICAg
IHZhciBjdHJsID0gdGhpczsKCiAgICAvLyBFcnJvciB0ZXh0IGZvciBpbnZhbGlkIGZpZWxkcwog
ICAgLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCiAgICBjdHJsLmJvb3RTb3VyY2VUeXBlRXJy
b3IgPSBnZXR0ZXh0KCdWb2x1bWVzIGNhbiBvbmx5IGJlIGF0dGFjaGVkIHRvIDEgYWN0aXZlIGlu
c3RhbmNlIGF0IGEgdGltZS4gUGxlYXNlIGVpdGhlciBzZXQgeW91ciBpbnN0YW5jZSBjb3VudCB0
byAxIG9yIHNlbGVjdCBhIGRpZmZlcmVudCBzb3VyY2UgdHlwZS4nKTsKICAgIC8qZXNsaW50LWVu
YWJsZSBtYXgtbGVuICovCiAgICBjdHJsLnZvbHVtZVNpemVFcnJvciA9IGdldHRleHQoJ1ZvbHVt
ZSBzaXplIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGFuIGludGVnZXInKTsKCiAgICAvLyB0b2dn
bGUgYnV0dG9uIGxhYmVsL3ZhbHVlIGRlZmF1bHRzCiAgICBjdHJsLnRvZ2dsZUJ1dHRvbk9wdGlv
bnMgPSBbCiAgICAgIHsgbGFiZWw6IGdldHRleHQoJ1llcycpLCB2YWx1ZTogdHJ1ZSB9LAogICAg
ICB7IGxhYmVsOiBnZXR0ZXh0KCdObycpLCB2YWx1ZTogZmFsc2UgfQogICAgXTsKCiAgICAvKgog
ICAgICogQm9vdCBTb3VyY2VzCiAgICAgKi8KICAgIGN0cmwuYm9vdFNvdXJjZXNPcHRpb25zID0g
WwogICAgICB7IHR5cGU6IGJvb3RTb3VyY2VUeXBlcy5JTUFHRSwgbGFiZWw6IGdldHRleHQoJ0lt
YWdlJykgfSwKICAgICAgeyB0eXBlOiBib290U291cmNlVHlwZXMuSU5TVEFOQ0VfU05BUFNIT1Qs
IGxhYmVsOiBnZXR0ZXh0KCdJbnN0YW5jZSBTbmFwc2hvdCcpIH0sCiAgICAgIHsgdHlwZTogYm9v
dFNvdXJjZVR5cGVzLlZPTFVNRSwgbGFiZWw6IGdldHRleHQoJ1ZvbHVtZScpIH0sCiAgICAgIHsg
dHlwZTogYm9vdFNvdXJjZVR5cGVzLlZPTFVNRV9TTkFQU0hPVCwgbGFiZWw6IGdldHRleHQoJ1Zv
bHVtZSBTbmFwc2hvdCcpIH0KICAgIF07CgogICAgY3RybC51cGRhdGVCb290U291cmNlU2VsZWN0
aW9uID0gdXBkYXRlQm9vdFNvdXJjZVNlbGVjdGlvbjsKICAgIGN0cmwuVmFsaWRhdGVTZ3hNZW1v
cnkgPSBWYWxpZGF0ZVNneE1lbW9yeTsKCiAgICAvKgogICAgICogVHJhbnNmZXIgdGFibGUKICAg
ICAqLwogICAgY3RybC50YWJsZUhlYWRDZWxscyA9IFtdOwogICAgY3RybC50YWJsZUJvZHlDZWxs
cyA9IFtdOwogICAgY3RybC50YWJsZURhdGEgPSB7fTsKICAgIGN0cmwuaGVscFRleHQgPSB7fTsK
ICAgIGN0cmwuc291cmNlRGV0YWlscyA9IGJhc2VQYXRoICsgJ3NvdXJjZS9zb3VyY2UtZGV0YWls
cy5odG1sJzsKCiAgICB2YXIgc2VsZWN0aW9uID0gY3RybC5zZWxlY3Rpb24gPSAkc2NvcGUubW9k
ZWwubmV3SW5zdGFuY2VTcGVjLnNvdXJjZTsKCiAgICB2YXIgYm9vdFNvdXJjZXMgPSB7CiAgICAg
IGltYWdlOiB7CiAgICAgICAgYXZhaWxhYmxlOiAkc2NvcGUubW9kZWwuaW1hZ2VzLAogICAgICAg
IGFsbG9jYXRlZDogc2VsZWN0aW9uLAogICAgICAgIGRpc3BsYXllZEF2YWlsYWJsZTogJHNjb3Bl
Lm1vZGVsLmltYWdlcywKICAgICAgICBkaXNwbGF5ZWRBbGxvY2F0ZWQ6IHNlbGVjdGlvbgogICAg
ICB9LAogICAgICBzbmFwc2hvdDogewogICAgICAgIGF2YWlsYWJsZTogJHNjb3BlLm1vZGVsLmlt
YWdlU25hcHNob3RzLAogICAgICAgIGFsbG9jYXRlZDogc2VsZWN0aW9uLAogICAgICAgIGRpc3Bs
YXllZEF2YWlsYWJsZTogW10sCiAgICAgICAgZGlzcGxheWVkQWxsb2NhdGVkOiBzZWxlY3Rpb24K
ICAgICAgfSwKICAgICAgdm9sdW1lOiB7CiAgICAgICAgYXZhaWxhYmxlOiAkc2NvcGUubW9kZWwu
dm9sdW1lcywKICAgICAgICBhbGxvY2F0ZWQ6IHNlbGVjdGlvbiwKICAgICAgICBkaXNwbGF5ZWRB
dmFpbGFibGU6IFtdLAogICAgICAgIGRpc3BsYXllZEFsbG9jYXRlZDogc2VsZWN0aW9uCiAgICAg
IH0sCiAgICAgIHZvbHVtZV9zbmFwc2hvdDogewogICAgICAgIGF2YWlsYWJsZTogJHNjb3BlLm1v
ZGVsLnZvbHVtZVNuYXBzaG90cywKICAgICAgICBhbGxvY2F0ZWQ6IHNlbGVjdGlvbiwKICAgICAg
ICBkaXNwbGF5ZWRBdmFpbGFibGU6IFtdLAogICAgICAgIGRpc3BsYXllZEFsbG9jYXRlZDogc2Vs
ZWN0aW9uCiAgICAgIH0KICAgIH07CgogICAgdmFyIGRpc2tGb3JtYXRzID0gWwogICAgICB7IGxh
YmVsOiBnZXR0ZXh0KCdBS0knKSwga2V5OiAnYWtpJyB9LAogICAgICB7IGxhYmVsOiBnZXR0ZXh0
KCdBTUknKSwga2V5OiAnYW1pJyB9LAogICAgICB7IGxhYmVsOiBnZXR0ZXh0KCdBUkknKSwga2V5
OiAnYXJpJyB9LAogICAgICB7IGxhYmVsOiBnZXR0ZXh0KCdEb2NrZXInKSwga2V5OiAnZG9ja2Vy
JyB9LAogICAgICB7IGxhYmVsOiBnZXR0ZXh0KCdJU08nKSwga2V5OiAnaXNvJyB9LAogICAgICB7
IGxhYmVsOiBnZXR0ZXh0KCdPVkEnKSwga2V5OiAnb3ZhJyB9LAogICAgICB7IGxhYmVsOiBnZXR0
ZXh0KCdRQ09XMicpLCBrZXk6ICdxY293MicgfSwKICAgICAgeyBsYWJlbDogZ2V0dGV4dCgnUkFX
JyksIGtleTogJ3JhdycgfSwKICAgICAgeyBsYWJlbDogZ2V0dGV4dCgnVkRJJyksIGtleTogJ3Zk
aScgfSwKICAgICAgeyBsYWJlbDogZ2V0dGV4dCgnVkhEJyksIGtleTogJ3ZoZCcgfSwKICAgICAg
eyBsYWJlbDogZ2V0dGV4dCgnVk1ESycpLCBrZXk6ICd2bWRrJyB9CiAgICBdOwoKICAgIC8vIE1h
cHBpbmcgZm9yIGR5bmFtaWMgdGFibGUgaGVhZGVycwogICAgdmFyIHRhYmxlSGVhZENlbGxzTWFw
ID0gewogICAgICBpbWFnZTogWwogICAgICAgIHsgdGV4dDogZ2V0dGV4dCgnTmFtZScpLCBzdHls
ZTogeyB3aWR0aDogJzMwJScgfSwgc29ydGFibGU6IHRydWUsIHNvcnREZWZhdWx0OiB0cnVlIH0s
CiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdVcGRhdGVkJyksIHN0eWxlOiB7IHdpZHRoOiAnMTUl
JyB9LCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsgdGV4dDogZ2V0dGV4dCgnU2l6ZScpLCBz
dHlsZTogeyB3aWR0aDogJzE1JScgfSwgY2xhc3NMaXN0OiBbJ251bWJlciddLCBzb3J0YWJsZTog
dHJ1ZSB9LAogICAgICAgIHsgdGV4dDogZ2V0dGV4dCgnVHlwZScpLCBzb3J0YWJsZTogdHJ1ZSB9
LAogICAgICAgIHsgdGV4dDogZ2V0dGV4dCgnVmlzaWJpbGl0eScpLCBzb3J0YWJsZTogdHJ1ZSB9
CiAgICAgIF0sCiAgICAgIHNuYXBzaG90OiBbCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdOYW1l
JyksIHN0eWxlOiB7IHdpZHRoOiAnMzAlJyB9LCBzb3J0YWJsZTogdHJ1ZSwgc29ydERlZmF1bHQ6
IHRydWUgfSwKICAgICAgICB7IHRleHQ6IGdldHRleHQoJ1VwZGF0ZWQnKSwgc3R5bGU6IHsgd2lk
dGg6ICcxNSUnIH0sIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdT
aXplJyksIHN0eWxlOiB7IHdpZHRoOiAnMTUlJyB9LCBjbGFzc0xpc3Q6IFsnbnVtYmVyJ10sIHNv
cnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdUeXBlJyksIHNvcnRhYmxl
OiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdWaXNpYmlsaXR5JyksIHNvcnRhYmxl
OiB0cnVlIH0KICAgICAgXSwKICAgICAgdm9sdW1lOiBbCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0
KCdOYW1lJyksIHN0eWxlOiB7IHdpZHRoOiAnMjUlJyB9LCBzb3J0YWJsZTogdHJ1ZSwgc29ydERl
ZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IHRleHQ6IGdldHRleHQoJ0Rlc2NyaXB0aW9uJyksIHN0
eWxlOiB7IHdpZHRoOiAnMjAlJyB9LCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsgdGV4dDog
Z2V0dGV4dCgnU2l6ZScpLCBzdHlsZTogeyB3aWR0aDogJzE1JScgfSwgY2xhc3NMaXN0OiBbJ251
bWJlciddLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsgdGV4dDogZ2V0dGV4dCgnVHlwZScp
LCBzdHlsZTogeyB3aWR0aDogJzIwJScgfSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IHRl
eHQ6IGdldHRleHQoJ0F2YWlsYWJpbGl0eSBab25lJyksIHN0eWxlOiB7IHdpZHRoOiAnMjAlJyB9
LCBzb3J0YWJsZTogdHJ1ZSB9CiAgICAgIF0sCiAgICAgIHZvbHVtZV9zbmFwc2hvdDogWwogICAg
ICAgIHsgdGV4dDogZ2V0dGV4dCgnTmFtZScpLCBzdHlsZTogeyB3aWR0aDogJzI1JScgfSwgc29y
dGFibGU6IHRydWUsIHNvcnREZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0
KCdEZXNjcmlwdGlvbicpLCBzdHlsZTogeyB3aWR0aDogJzIwJScgfSwgc29ydGFibGU6IHRydWUg
fSwKICAgICAgICB7IHRleHQ6IGdldHRleHQoJ1NpemUnKSwgc3R5bGU6IHsgd2lkdGg6ICcxNSUn
IH0sIGNsYXNzTGlzdDogWydudW1iZXInXSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IHRl
eHQ6IGdldHRleHQoJ0NyZWF0ZWQnKSwgc3R5bGU6IHsgd2lkdGg6ICcxNSUnIH0sIHNvcnRhYmxl
OiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiBnZXR0ZXh0KCdTdGF0dXMnKSwgc3R5bGU6IHsgd2lk
dGg6ICcyMCUnIH0sIHNvcnRhYmxlOiB0cnVlIH0KICAgICAgXQogICAgfTsKCiAgICAvLyBNYXAg
VmlzaWJpbGl0eSBkYXRhIHNvIHdlIGNhbiBkZWNvZGUgdHJ1ZS9mYWxzZSB0byBQdWJsaWMvUHJp
dmF0ZQogICAgdmFyIF92aXNpYmlsaXR5bWFwID0geyB0cnVlOiBnZXR0ZXh0KCdQdWJsaWMnKSwg
ZmFsc2U6IGdldHRleHQoJ1ByaXZhdGUnKSB9OwoKICAgIC8vIE1hcHBpbmcgZm9yIGR5bmFtaWMg
dGFibGUgZGF0YQogICAgdmFyIHRhYmxlQm9keUNlbGxzTWFwID0gewogICAgICBpbWFnZTogWwog
ICAgICAgIHsga2V5OiAnbmFtZScsIGNsYXNzTGlzdDogWydoaS1saWdodCddIH0sCiAgICAgICAg
eyBrZXk6ICd1cGRhdGVkX2F0JywgZmlsdGVyOiBkYXRlRmlsdGVyLCBmaWx0ZXJBcmc6ICdzaG9y
dCcgfSwKICAgICAgICB7IGtleTogJ3NpemUnLCBmaWx0ZXI6IGJ5dGVzRmlsdGVyLCBjbGFzc0xp
c3Q6IFsnbnVtYmVyJ10gfSwKICAgICAgICB7IGtleTogJ2Rpc2tfZm9ybWF0Jywgc3R5bGU6IHsg
J3RleHQtdHJhbnNmb3JtJzogJ3VwcGVyY2FzZScgfSwKICAgICAgICAgIGZpbHRlcjogZGlza0Zv
cm1hdEZpbHRlciwgZmlsdGVyUmF3RGF0YTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAnaXNfcHVi
bGljJywgZmlsdGVyOiBkZWNvZGVGaWx0ZXIsIGZpbHRlckFyZzogX3Zpc2liaWxpdHltYXAsCiAg
ICAgICAgICBzdHlsZTogeyAndGV4dC10cmFuc2Zvcm0nOiAnY2FwaXRhbGl6ZScgfSB9CiAgICAg
IF0sCiAgICAgIHNuYXBzaG90OiBbCiAgICAgICAgeyBrZXk6ICduYW1lJywgY2xhc3NMaXN0OiBb
J2hpLWxpZ2h0J10gfSwKICAgICAgICB7IGtleTogJ3VwZGF0ZWRfYXQnLCBmaWx0ZXI6IGRhdGVG
aWx0ZXIsIGZpbHRlckFyZzogJ3Nob3J0JyB9LAogICAgICAgIHsga2V5OiAnc2l6ZScsIGZpbHRl
cjogYnl0ZXNGaWx0ZXIsIGNsYXNzTGlzdDogWydudW1iZXInXSB9LAogICAgICAgIHsga2V5OiAn
ZGlza19mb3JtYXQnLCBzdHlsZTogeyAndGV4dC10cmFuc2Zvcm0nOiAndXBwZXJjYXNlJyB9LAog
ICAgICAgICAgZmlsdGVyOiBkaXNrRm9ybWF0RmlsdGVyLCBmaWx0ZXJSYXdEYXRhOiB0cnVlIH0s
CiAgICAgICAgeyBrZXk6ICdpc19wdWJsaWMnLCBmaWx0ZXI6IGRlY29kZUZpbHRlciwgZmlsdGVy
QXJnOiBfdmlzaWJpbGl0eW1hcCwKICAgICAgICAgIHN0eWxlOiB7ICd0ZXh0LXRyYW5zZm9ybSc6
ICdjYXBpdGFsaXplJyB9IH0KICAgICAgXSwKICAgICAgdm9sdW1lOiBbCiAgICAgICAgeyBrZXk6
ICduYW1lJywgY2xhc3NMaXN0OiBbJ2hpLWxpZ2h0J10gfSwKICAgICAgICB7IGtleTogJ2Rlc2Ny
aXB0aW9uJyB9LAogICAgICAgIHsga2V5OiAnc2l6ZScsIGZpbHRlcjogZ2JGaWx0ZXIsIGNsYXNz
TGlzdDogWydudW1iZXInXSB9LAogICAgICAgIHsga2V5OiAndm9sdW1lX2ltYWdlX21ldGFkYXRh
JywgZmlsdGVyOiBkaXNrRm9ybWF0RmlsdGVyLAogICAgICAgICAgc3R5bGU6IHsgJ3RleHQtdHJh
bnNmb3JtJzogJ3VwcGVyY2FzZScgfSB9LAogICAgICAgIHsga2V5OiAnYXZhaWxhYmlsaXR5X3pv
bmUnIH0KICAgICAgXSwKICAgICAgdm9sdW1lX3NuYXBzaG90OiBbCiAgICAgICAgeyBrZXk6ICdu
YW1lJywgY2xhc3NMaXN0OiBbJ2hpLWxpZ2h0J10gfSwKICAgICAgICB7IGtleTogJ2Rlc2NyaXB0
aW9uJyB9LAogICAgICAgIHsga2V5OiAnc2l6ZScsIGZpbHRlcjogZ2JGaWx0ZXIsIGNsYXNzTGlz
dDogWydudW1iZXInXSB9LAogICAgICAgIHsga2V5OiAnY3JlYXRlZF9hdCcsIGZpbHRlcjogZGF0
ZUZpbHRlciwgZmlsdGVyQXJnOiAnc2hvcnQnIH0sCiAgICAgICAgeyBrZXk6ICdzdGF0dXMnLCBz
dHlsZTogeyAndGV4dC10cmFuc2Zvcm0nOiAnY2FwaXRhbGl6ZScgfSB9CiAgICAgIF0KICAgIH07
CgogICAgLyoqCiAgICAgKiBGaWx0ZXJpbmcgLSBjbGllbnQtc2lkZSBNYWdpY1NlYXJjaAogICAg
ICovCiAgICBjdHJsLnNvdXJjZUZhY2V0cyA9IFtdOwoKICAgIC8vIEFsbCBmYWNldHMgZm9yIHNv
dXJjZSBzdGVwCiAgICB2YXIgZmFjZXRzID0gewogICAgICBjcmVhdGVkOiB7CiAgICAgICAgbGFi
ZWw6IGdldHRleHQoJ0NyZWF0ZWQnKSwKICAgICAgICBuYW1lOiAnY3JlYXRlZF9hdCcsCiAgICAg
ICAgc2luZ2xldG9uOiB0cnVlCiAgICAgIH0sCiAgICAgIGRlc2NyaXB0aW9uOiB7CiAgICAgICAg
bGFiZWw6IGdldHRleHQoJ0Rlc2NyaXB0aW9uJyksCiAgICAgICAgbmFtZTogJ2Rlc2NyaXB0aW9u
JywKICAgICAgICBzaW5nbGV0b246IHRydWUKICAgICAgfSwKICAgICAgZW5jcnlwdGVkOiB7CiAg
ICAgICAgbGFiZWw6IGdldHRleHQoJ0VuY3J5cHRlZCcpLAogICAgICAgIG5hbWU6ICdlbmNyeXB0
ZWQnLAogICAgICAgIHNpbmdsZXRvbjogdHJ1ZSwKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAg
ICB7IGxhYmVsOiBnZXR0ZXh0KCdZZXMnKSwga2V5OiAndHJ1ZScgfSwKICAgICAgICAgIHsgbGFi
ZWw6IGdldHRleHQoJ05vJyksIGtleTogJ2ZhbHNlJyB9CiAgICAgICAgXQogICAgICB9LAogICAg
ICBuYW1lOiB7CiAgICAgICAgbGFiZWw6IGdldHRleHQoJ05hbWUnKSwKICAgICAgICBuYW1lOiAn
bmFtZScsCiAgICAgICAgc2luZ2xldG9uOiB0cnVlCiAgICAgIH0sCiAgICAgIHNpemU6IHsKICAg
ICAgICBsYWJlbDogZ2V0dGV4dCgnU2l6ZScpLAogICAgICAgIG5hbWU6ICdzaXplJywKICAgICAg
ICBzaW5nbGV0b246IHRydWUKICAgICAgfSwKICAgICAgc3RhdHVzOiB7CiAgICAgICAgbGFiZWw6
IGdldHRleHQoJ1N0YXR1cycpLAogICAgICAgIG5hbWU6ICdzdGF0dXMnLAogICAgICAgIHNpbmds
ZXRvbjogdHJ1ZSwKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IGxhYmVsOiBnZXR0ZXh0
KCdBdmFpbGFibGUnKSwga2V5OiAnYXZhaWxhYmxlJyB9LAogICAgICAgICAgeyBsYWJlbDogZ2V0
dGV4dCgnQ3JlYXRpbmcnKSwga2V5OiAnY3JlYXRpbmcnIH0sCiAgICAgICAgICB7IGxhYmVsOiBn
ZXR0ZXh0KCdEZWxldGluZycpLCBrZXk6ICdkZWxldGluZycgfSwKICAgICAgICAgIHsgbGFiZWw6
IGdldHRleHQoJ0Vycm9yJyksIGtleTogJ2Vycm9yJyB9LAogICAgICAgICAgeyBsYWJlbDogZ2V0
dGV4dCgnRXJyb3IgRGVsZXRpbmcnKSwga2V5OiAnZXJyb3JfZGVsZXRpbmcnIH0KICAgICAgICBd
CiAgICAgIH0sCiAgICAgIHR5cGU6IHsKICAgICAgICBsYWJlbDogZ2V0dGV4dCgnVHlwZScpLAog
ICAgICAgIG5hbWU6ICdkaXNrX2Zvcm1hdCcsCiAgICAgICAgc2luZ2xldG9uOiB0cnVlLAogICAg
ICAgIG9wdGlvbnM6IGRpc2tGb3JtYXRzCiAgICAgIH0sCiAgICAgIHVwZGF0ZWQ6IHsKICAgICAg
ICBsYWJlbDogZ2V0dGV4dCgnVXBkYXRlZCcpLAogICAgICAgIG5hbWU6ICd1cGRhdGVkX2F0JywK
ICAgICAgICBzaW5nbGV0b246IHRydWUKICAgICAgfSwKICAgICAgdmlzaWJpbGl0eTogewogICAg
ICAgIGxhYmVsOiBnZXR0ZXh0KCdWaXNpYmlsaXR5JyksCiAgICAgICAgbmFtZTogJ2lzX3B1Ymxp
YycsCiAgICAgICAgc2luZ2xldG9uOiB0cnVlLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAg
IHsgbGFiZWw6IGdldHRleHQoJ1B1YmxpYycpLCBrZXk6ICd0cnVlJyB9LAogICAgICAgICAgeyBs
YWJlbDogZ2V0dGV4dCgnUHJpdmF0ZScpLCBrZXk6ICdmYWxzZScgfQogICAgICAgIF0KICAgICAg
fSwKICAgICAgdm9sdW1lVHlwZTogewogICAgICAgIGxhYmVsOiBnZXR0ZXh0KCdUeXBlJyksCiAg
ICAgICAgbmFtZTogJ3ZvbHVtZV9pbWFnZV9tZXRhZGF0YS5kaXNrX2Zvcm1hdCcsCiAgICAgICAg
c2luZ2xldG9uOiB0cnVlLAogICAgICAgIG9wdGlvbnM6IGRpc2tGb3JtYXRzCiAgICAgIH0KICAg
IH07CgogICAgLy8gTWFwcGluZyBmb3IgZmlsdGVyIGZhY2V0cyBiYXNlZCBvbiBib290IHNvdXJj
ZSB0eXBlCiAgICB2YXIgc291cmNlVHlwZUZhY2V0cyA9IHsKICAgICAgaW1hZ2U6IFsKICAgICAg
ICBmYWNldHMubmFtZSwgZmFjZXRzLnVwZGF0ZWQsIGZhY2V0cy5zaXplLCBmYWNldHMudHlwZSwg
ZmFjZXRzLnZpc2liaWxpdHkKICAgICAgXSwKICAgICAgc25hcHNob3Q6IFsKICAgICAgICBmYWNl
dHMubmFtZSwgZmFjZXRzLnVwZGF0ZWQsIGZhY2V0cy5zaXplLCBmYWNldHMudHlwZSwgZmFjZXRz
LnZpc2liaWxpdHkKICAgICAgXSwKICAgICAgdm9sdW1lOiBbCiAgICAgICAgZmFjZXRzLm5hbWUs
IGZhY2V0cy5kZXNjcmlwdGlvbiwgZmFjZXRzLnNpemUsIGZhY2V0cy52b2x1bWVUeXBlLCBmYWNl
dHMuZW5jcnlwdGVkCiAgICAgIF0sCiAgICAgIHZvbHVtZV9zbmFwc2hvdDogWwogICAgICAgIGZh
Y2V0cy5uYW1lLCBmYWNldHMuZGVzY3JpcHRpb24sIGZhY2V0cy5zaXplLCBmYWNldHMuY3JlYXRl
ZCwgZmFjZXRzLnN0YXR1cwogICAgICBdCiAgICB9OwoKICAgIHZhciBuZXdTcGVjV2F0Y2hlciA9
ICRzY29wZS4kd2F0Y2goCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gJHNjb3Bl
Lm1vZGVsLm5ld0luc3RhbmNlU3BlYy5pbnN0YW5jZV9jb3VudDsKICAgICAgfSwKICAgICAgZnVu
Y3Rpb24gKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xk
VmFsdWUpIHsKICAgICAgICAgIHZhbGlkYXRlQm9vdFNvdXJjZVR5cGUoKTsKICAgICAgICB9CiAg
ICAgIH0KICAgICk7CgogICAgdmFyIGFsbG9jYXRlZFdhdGNoZXIgPSAkc2NvcGUuJHdhdGNoKAog
ICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGN0cmwudGFibGVEYXRhLmFsbG9jYXRl
ZC5sZW5ndGg7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICAgIGNo
ZWNrVm9sdW1lRm9ySW1hZ2UobmV3VmFsdWUpOwogICAgICB9CiAgICApOwoKICAgIC8vIFNpbmNl
IGF2YWlsYWJsZSB0cmFuc2ZlciB0YWJsZSBmb3IgTGF1bmNoIEluc3RhbmNlIFNvdXJjZSBzdGVw
IGlzCiAgICAvLyBkeW5hbWljYWxseSBzZWxlY3RlZCBiYXNlZCBvbiBCb290IFNvdXJjZSwgd2Ug
bmVlZCB0byB1cGRhdGUgdGhlCiAgICAvLyBtb2RlbCBoZXJlIGFjY29yZGluZ2x5LiBPdGhlcndp
c2UgaXQgd2lsbCBvbmx5IGNhbGN1bGF0ZSB0aGUgaXRlbXMKICAgIC8vIGF2YWlsYWJsZSBiYXNl
ZCBvbiB0aGUgb3JpZ2luYWwgc2VsZWN0aW9uIEJvb3QgU291cmNlOiBJbWFnZS4KICAgIHZhciBi
b290U291cmNlV2F0Y2hlciA9ICRzY29wZS4kd2F0Y2goCiAgICAgIGZ1bmN0aW9uIGdldEJvb3RT
b3VyY2UoKSB7CiAgICAgICAgcmV0dXJuIGN0cmwuY3VycmVudEJvb3RTb3VyY2U7CiAgICAgIH0s
CiAgICAgIGZ1bmN0aW9uIG9uQm9vdFNvdXJjZUNoYW5nZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsK
ICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgICAgICAkc2NvcGUuJGJy
b2FkY2FzdChldmVudHMuQVZBSUxfQ0hBTkdFRCwgewogICAgICAgICAgICAnZGF0YSc6IGJvb3RT
b3VyY2VzW25ld1ZhbHVlXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICApOwoK
ICAgIHZhciBpbWFnZXNXYXRjaGVyID0gJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oCiAgICAgIGZ1
bmN0aW9uIGdldEltYWdlcygpIHsKICAgICAgICByZXR1cm4gJHNjb3BlLm1vZGVsLmltYWdlczsK
ICAgICAgfSwKICAgICAgZnVuY3Rpb24gb25JbWFnZXNDaGFuZ2UoKSB7CiAgICAgICAgJHNjb3Bl
LmluaXRQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgJHNjb3BlLiRhcHBseUFz
eW5jKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCRzY29wZS5sYXVuY2hDb250ZXh0Lmlt
YWdlSWQpIHsKICAgICAgICAgICAgICBzZXRTb3VyY2VJbWFnZVdpdGhJZCgkc2NvcGUubGF1bmNo
Q29udGV4dC5pbWFnZUlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7
CiAgICAgIH0KICAgICk7CgogICAgdmFyIHZvbHVtZVdhdGNoZXIgPSAkc2NvcGUuJHdhdGNoQ29s
bGVjdGlvbigKICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lcygpIHsKICAgICAgICByZXR1cm4gJHNj
b3BlLm1vZGVsLnZvbHVtZXM7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uIG9uVm9sdW1lc0NoYW5n
ZSgpIHsKICAgICAgICAkc2NvcGUuaW5pdFByb21pc2UudGhlbihmdW5jdGlvbiBvbkluaXQoKSB7
CiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24gc2V0RGVmYXVsdFZvbHVtZSgp
IHsKICAgICAgICAgICAgaWYgKCRzY29wZS5sYXVuY2hDb250ZXh0LnZvbHVtZUlkKSB7CiAgICAg
ICAgICAgICAgc2V0U291cmNlVm9sdW1lV2l0aElkKCRzY29wZS5sYXVuY2hDb250ZXh0LnZvbHVt
ZUlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAg
ICk7CgogICAgdmFyIHNuYXBzaG90V2F0Y2hlciA9ICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKAog
ICAgICBmdW5jdGlvbiBnZXRTbmFwc2hvdHMoKSB7CiAgICAgICAgcmV0dXJuICRzY29wZS5tb2Rl
bC52b2x1bWVTbmFwc2hvdHM7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uIG9uU25hcHNob3RzQ2hh
bmdlKCkgewogICAgICAgICRzY29wZS5pbml0UHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uSW5pdCgp
IHsKICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbiBzZXREZWZhdWx0U25hcHNo
b3QoKSB7CiAgICAgICAgICAgIGlmICgkc2NvcGUubGF1bmNoQ29udGV4dC5zbmFwc2hvdElkKSB7
CiAgICAgICAgICAgICAgc2V0U291cmNlU25hcHNob3RXaXRoSWQoJHNjb3BlLmxhdW5jaENvbnRl
eHQuc25hcHNob3RJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwog
ICAgICB9CiAgICApOwoKICAgIC8vIEV4cGxpY2l0bHkgcmVtb3ZlIHdhdGNoZXJzIG9uIGRlc3J1
Y3Rpb24gb2YgdGhpcyBjb250cm9sbGVyCiAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0
aW9uKCkgewogICAgICBuZXdTcGVjV2F0Y2hlcigpOwogICAgICBhbGxvY2F0ZWRXYXRjaGVyKCk7
CiAgICAgIGJvb3RTb3VyY2VXYXRjaGVyKCk7CiAgICAgIGltYWdlc1dhdGNoZXIoKTsKICAgICAg
dm9sdW1lV2F0Y2hlcigpOwogICAgICBzbmFwc2hvdFdhdGNoZXIoKTsKICAgIH0pOwoKICAgIC8v
IEluaXRpYWxpemUKICAgIGNoYW5nZUJvb3RTb3VyY2UoY3RybC5ib290U291cmNlc09wdGlvbnNb
MF0udHlwZSk7CgogICAgaWYgKCEkc2NvcGUubW9kZWwubmV3SW5zdGFuY2VTcGVjLnNvdXJjZV90
eXBlKSB7CiAgICAgICRzY29wZS5tb2RlbC5uZXdJbnN0YW5jZVNwZWMuc291cmNlX3R5cGUgPSBj
dHJsLmJvb3RTb3VyY2VzT3B0aW9uc1swXTsKICAgICAgY3RybC5jdXJyZW50Qm9vdFNvdXJjZSA9
IGN0cmwuYm9vdFNvdXJjZXNPcHRpb25zWzBdLnR5cGU7CiAgICB9CgogICAgLy8vLy8vLy8vLy8v
Ly8vLy8vLy8KCiAgICBmdW5jdGlvbiB1cGRhdGVCb290U291cmNlU2VsZWN0aW9uKHNlbGVjdGVk
U291cmNlKSB7CiAgICAgIGN0cmwuY3VycmVudEJvb3RTb3VyY2UgPSBzZWxlY3RlZFNvdXJjZTsK
ICAgICAgJHNjb3BlLm1vZGVsLm5ld0luc3RhbmNlU3BlYy52b2xfY3JlYXRlID0gZmFsc2U7CiAg
ICAgICRzY29wZS5tb2RlbC5uZXdJbnN0YW5jZVNwZWMudm9sX2RlbGV0ZV9vbl9pbnN0YW5jZV9k
ZWxldGUgPSBmYWxzZTsKICAgICAgY2hhbmdlQm9vdFNvdXJjZShzZWxlY3RlZFNvdXJjZSk7CiAg
ICAgIHZhbGlkYXRlQm9vdFNvdXJjZVR5cGUoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGlzUG93ZXJP
ZlR3byhuKQogICAgewogICAgICAgIGlmIChuID09IDApCiAgICAgICAgICAgIHJldHVybiAwOwog
ICAgICAgIHdoaWxlIChuICE9IDEpCiAgICAgICAgewogICAgICAgICAgICBpZiAobiUyICE9IDAp
CiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgbiA9IG4vMjsKICAgICAgICB9
CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIFZhbGlkYXRlU2d4TWVt
b3J5KCl7CiAgICAgICAgdmFyIG49aXNQb3dlck9mVHdvKCRzY29wZS5tb2RlbC5uZXdJbnN0YW5j
ZVNwZWMuc2d4X21lbW9yeV9tYikKICAgICAgICAgICAgaWYgKG4gPT0gMCl7CiAgICAgICAgICAg
ICAgICBhbGVydCgiU0dYIG1lbW9yeSBub3QgQWxsb3dlZCEhISBQcm92aWRlIGluIFBvd2VyIG9m
IDIiKQogICAgICAgICAgICAgICAgJHNjb3BlLm1vZGVsLm5ld0luc3RhbmNlU3BlYy5zZ3hfbWVt
b3J5X21iID0gMAogICAgICAgICAgICB9CiAgICB9CgogICAgLy8gRHluYW1pY2FsbHkgdXBkYXRl
IHBhZ2UgYmFzZWQgb24gYm9vdCBzb3VyY2Ugc2VsZWN0aW9uCiAgICBmdW5jdGlvbiBjaGFuZ2VC
b290U291cmNlKGtleSwgcHJlU2VsZWN0aW9uKSB7CiAgICAgIHVwZGF0ZURhdGFTb3VyY2Uoa2V5
LCBwcmVTZWxlY3Rpb24pOwogICAgICB1cGRhdGVIZWxwVGV4dChrZXkpOwogICAgICB1cGRhdGVU
YWJsZUhlYWRDZWxscyhrZXkpOwogICAgICB1cGRhdGVUYWJsZUJvZHlDZWxscyhrZXkpOwogICAg
ICB1cGRhdGVGYWNldHMoa2V5KTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVEYXRhU291cmNl
KGtleSwgcHJlU2VsZWN0aW9uKSB7CiAgICAgIHNlbGVjdGlvbi5sZW5ndGggPSAwOwogICAgICBp
ZiAocHJlU2VsZWN0aW9uKSB7CiAgICAgICAgcHVzaC5hcHBseShzZWxlY3Rpb24sIHByZVNlbGVj
dGlvbik7CiAgICAgIH0KICAgICAgYW5ndWxhci5leHRlbmQoY3RybC50YWJsZURhdGEsIGJvb3RT
b3VyY2VzW2tleV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUhlbHBUZXh0KCkgewogICAg
ICBhbmd1bGFyLmV4dGVuZChjdHJsLmhlbHBUZXh0LCB7CiAgICAgICAgbm9uZUFsbG9jVGV4dDog
Z2V0dGV4dCgnU2VsZWN0IGEgc291cmNlIGZyb20gdGhvc2UgbGlzdGVkIGJlbG93LicpLAogICAg
ICAgIGF2YWlsSGVscFRleHQ6IGdldHRleHQoJ1NlbGVjdCBvbmUnKSwKICAgICAgICAvKmVzbGlu
dC1kaXNhYmxlIG1heC1sZW4gKi8KICAgICAgICB2b2x1bWVBWkhlbHBUZXh0OiBnZXR0ZXh0KCdX
aGVuIHNlbGVjdGluZyB2b2x1bWUgYXMgYm9vdCBzb3VyY2UsIHBsZWFzZSBlbnN1cmUgdGhlIGlu
c3RhbmNlXCdzIGF2YWlsYWJpbGl0eSB6b25lIGlzIGNvbXBhdGlibGUgd2l0aCB5b3VyIHZvbHVt
ZVwncyBhdmFpbGFiaWxpdHkgem9uZS4nKQogICAgICAgIC8qZXNsaW50LWVuYWJsZSBtYXgtbGVu
ICovCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlSGVhZENlbGxzKGtl
eSkgewogICAgICByZWZpbGxBcnJheShjdHJsLnRhYmxlSGVhZENlbGxzLCB0YWJsZUhlYWRDZWxs
c01hcFtrZXldKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVUYWJsZUJvZHlDZWxscyhrZXkp
IHsKICAgICAgcmVmaWxsQXJyYXkoY3RybC50YWJsZUJvZHlDZWxscywgdGFibGVCb2R5Q2VsbHNN
YXBba2V5XSk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlRmFjZXRzKGtleSkgewogICAgICBy
ZWZpbGxBcnJheShjdHJsLnNvdXJjZUZhY2V0cywgc291cmNlVHlwZUZhY2V0c1trZXldKTsKICAg
ICAgJHNjb3BlLiRicm9hZGNhc3QoJ2ZhY2V0c0NoYW5nZWQnKTsKICAgIH0KCiAgICBmdW5jdGlv
biByZWZpbGxBcnJheShhcnJheVRvUmVmaWxsLCBjb250ZW50QXJyYXkpIHsKICAgICAgYXJyYXlU
b1JlZmlsbC5sZW5ndGggPSAwOwogICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcnJh
eVRvUmVmaWxsLCBjb250ZW50QXJyYXkpOwogICAgfQoKICAgIC8qCiAgICAgKiBWYWxpZGF0aW9u
CiAgICAgKi8KCiAgICAvKgogICAgICogSWYgYm9vdCBzb3VyY2UgdHlwZSBpcyAnaW1hZ2UnIGFu
ZCAnQ3JlYXRlIE5ldyBWb2x1bWUnIGlzIGNoZWNrZWQsIHNldCB0aGUgbWluaW11bSB2b2x1bWUK
ICAgICAqIHNpemUgZm9yIHZhbGlkYXRpbmcgdm9sX3NpemUgZmllbGQKICAgICAqLwogICAgZnVu
Y3Rpb24gY2hlY2tWb2x1bWVGb3JJbWFnZSgpIHsKICAgICAgdmFyIHNvdXJjZSA9IHNlbGVjdGlv
blswXTsKCiAgICAgIGlmIChzb3VyY2UgJiYgY3RybC5jdXJyZW50Qm9vdFNvdXJjZSA9PT0gYm9v
dFNvdXJjZVR5cGVzLklNQUdFKSB7CiAgICAgICAgdmFyIGltYWdlR2IgPSBzb3VyY2Uuc2l6ZSAq
IDFlLTk7CiAgICAgICAgdmFyIGltYWdlRGlzayA9IHNvdXJjZS5taW5fZGlzazsKICAgICAgICBj
dHJsLm1pblZvbHVtZVNpemUgPSBNYXRoLmNlaWwoTWF0aC5tYXgoaW1hZ2VHYiwgaW1hZ2VEaXNr
KSk7CgogICAgICAgIHZhciB2b2x1bWVTaXplVGV4dCA9IGdldHRleHQoJ1RoZSB2b2x1bWUgc2l6
ZSBtdXN0IGJlIGF0IGxlYXN0ICUobWluVm9sdW1lU2l6ZSlzIEdCJyk7CiAgICAgICAgdmFyIHZv
bHVtZVNpemVPYmogPSB7IG1pblZvbHVtZVNpemU6IGN0cmwubWluVm9sdW1lU2l6ZSB9OwogICAg
ICAgIGN0cmwubWluVm9sdW1lU2l6ZUVycm9yID0gaW50ZXJwb2xhdGUodm9sdW1lU2l6ZVRleHQs
IHZvbHVtZVNpemVPYmosIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIC8qZXNsaW50LWRp
c2FibGUgbm8tdW5kZWZpbmVkICovCiAgICAgICAgY3RybC5taW5Wb2x1bWVTaXplID0gdW5kZWZp
bmVkOwogICAgICAgIC8qZXNsaW50LWVuYWJsZSBuby11bmRlZmluZWQgKi8KICAgICAgfQogICAg
fQoKICAgIC8vIFZhbGlkYXRvciBmb3IgYm9vdCBzb3VyY2UgdHlwZS4gSW5zdGFuY2UgY291bnQg
bXVzdCB0byBiZSAxIGlmIHZvbHVtZSBzZWxlY3RlZAogICAgZnVuY3Rpb24gdmFsaWRhdGVCb290
U291cmNlVHlwZSgpIHsKICAgICAgdmFyIGJvb3RTb3VyY2VUeXBlID0gY3RybC5jdXJyZW50Qm9v
dFNvdXJjZTsKICAgICAgdmFyIGluc3RhbmNlQ291bnQgPSAkc2NvcGUubW9kZWwubmV3SW5zdGFu
Y2VTcGVjLmluc3RhbmNlX2NvdW50OwoKICAgICAgLyoKICAgICAgICogRmllbGQgaXMgdmFsaWQg
aWYgYm9vdCBzb3VyY2UgdHlwZSBpcyBub3Qgdm9sdW1lLCBpbnN0YW5jZSBjb3VudCBpcyBibGFu
ay91bmRlZmluZWQKICAgICAgICogKHRoaXMgaXMgYW4gZXJyb3Igd2l0aCBpbnN0YW5jZSBjb3Vu
dCkgb3IgaW5zdGFuY2UgY291bnQgaXMgMQogICAgICAgKi8KICAgICAgdmFyIGlzVmFsaWQgPSBi
b290U291cmNlVHlwZSAhPT0gYm9vdFNvdXJjZVR5cGVzLlZPTFVNRSB8fAogICAgICAgICAgICAg
ICAgICAgICFpbnN0YW5jZUNvdW50IHx8CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VDb3Vu
dCA9PT0gMTsKCiAgICAgICRzY29wZS5sYXVuY2hJbnN0YW5jZVNvdXJjZUZvcm1bJ2Jvb3Qtc291
cmNlLXR5cGUnXQogICAgICAgICAgICAuJHNldFZhbGlkaXR5KCdib290U291cmNlVHlwZScsIGlz
VmFsaWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRTb3VyY2VCeUlkKHNvdXJjZXMsIGlkKSB7
CiAgICAgIHZhciBsZW4gPSBzb3VyY2VzLmxlbmd0aDsKICAgICAgdmFyIHNvdXJjZTsKICAgICAg
Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIHNvdXJjZSA9IHNvdXJjZXNb
aV07CiAgICAgICAgaWYgKHNvdXJjZS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBzb3Vy
Y2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U291cmNlSW1hZ2VX
aXRoSWQoaWQpIHsKICAgICAgdmFyIHByZSA9IGZpbmRTb3VyY2VCeUlkKCRzY29wZS5tb2RlbC5p
bWFnZXMsIGlkKTsKICAgICAgaWYgKHByZSkgewogICAgICAgIGNoYW5nZUJvb3RTb3VyY2UoYm9v
dFNvdXJjZVR5cGVzLklNQUdFLCBbcHJlXSk7CiAgICAgICAgJHNjb3BlLm1vZGVsLm5ld0luc3Rh
bmNlU3BlYy5zb3VyY2VfdHlwZSA9IGN0cmwuYm9vdFNvdXJjZXNPcHRpb25zWzBdOwogICAgICAg
IGN0cmwuY3VycmVudEJvb3RTb3VyY2UgPSBjdHJsLmJvb3RTb3VyY2VzT3B0aW9uc1swXS50eXBl
OwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U291cmNlVm9sdW1lV2l0aElkKGlkKSB7
CiAgICAgIHZhciBwcmUgPSBmaW5kU291cmNlQnlJZCgkc2NvcGUubW9kZWwudm9sdW1lcywgaWQp
OwogICAgICBpZiAocHJlKSB7CiAgICAgICAgY2hhbmdlQm9vdFNvdXJjZShib290U291cmNlVHlw
ZXMuVk9MVU1FLCBbcHJlXSk7CiAgICAgICAgJHNjb3BlLm1vZGVsLm5ld0luc3RhbmNlU3BlYy5z
b3VyY2VfdHlwZSA9IGN0cmwuYm9vdFNvdXJjZXNPcHRpb25zWzJdOwogICAgICAgIGN0cmwuY3Vy
cmVudEJvb3RTb3VyY2UgPSBjdHJsLmJvb3RTb3VyY2VzT3B0aW9uc1syXS50eXBlOwogICAgICB9
CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U291cmNlU25hcHNob3RXaXRoSWQoaWQpIHsKICAgICAg
dmFyIHByZSA9IGZpbmRTb3VyY2VCeUlkKCRzY29wZS5tb2RlbC52b2x1bWVTbmFwc2hvdHMsIGlk
KTsKICAgICAgaWYgKHByZSkgewogICAgICAgIGNoYW5nZUJvb3RTb3VyY2UoYm9vdFNvdXJjZVR5
cGVzLlZPTFVNRV9TTkFQU0hPVCwgW3ByZV0pOwogICAgICAgICRzY29wZS5tb2RlbC5uZXdJbnN0
YW5jZVNwZWMuc291cmNlX3R5cGUgPSBjdHJsLmJvb3RTb3VyY2VzT3B0aW9uc1szXTsKICAgICAg
ICBjdHJsLmN1cnJlbnRCb290U291cmNlID0gY3RybC5ib290U291cmNlc09wdGlvbnNbM10udHlw
ZTsKICAgICAgfQogICAgfQogIH0KfSkoKTsKCg==

